### 复杂度分析报告

斜堆的结构和正常的堆一样，是一颗二叉树，并且父结点的值大于等于儿子结点的值（大根堆）

插入的过程等价于合并一个只有一个点的堆，删除最大值的过程等价于合并左右儿子，因此只需要考虑合并操作的复杂度。

合并的时候，会将大的节点的右子树和另一个节点合并，并且交换左右子树。

接下来说明合并操作的复杂度为均摊 $\mathcal{O}(\log n)$

定义一个节点 $u$ 的 $sz_u$ 是 $u$ 结点的大小

定义重节点为右儿子 $sz$ 大于左儿子的 $sz$ 的节点

定义一棵树的势能 $\Phi(u)$ 为 $u$ 中的重结点个数。显然 $\Phi(u)\ge 0$。

考虑一次合并了树 $a$ 和树 $b$，那么一次合并的代价是路径上的重节点数目 $h$ 和非重节点数目 $l$ 的和 $h + l$。

由于非重节点的父亲的 $sz$ 至少是该节点的两倍，即 $l \le \log n$

一个路径上的重节点本身的右节点就比左节点大，操作完之后肯定依然是重节点，在交换左右儿子之后一定是轻节点。

原本是轻节点的节点有可能变成重节点。因此，合并之后新的树 $u$ 的势能 满足 $\Phi(u) \le \Phi(a) + \Phi(b) -h + l$

令 $S_n$ 表示在 $n$ 次操作后的所有根节点的势能和，那么由 $l \le \log n$ 可知 $S_n \le n\log n$

可知 $n$ 次操作的总时间复杂度 $\le S_n + n\log n = \mathcal{O}(n\log n)$，即均摊的时间复杂度为 $\mathcal{O}(\log n)$